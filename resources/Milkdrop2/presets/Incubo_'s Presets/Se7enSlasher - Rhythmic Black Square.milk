MILKDROP_PRESET_VERSION=201
PSVERSION=2
PSVERSION_WARP=2
PSVERSION_COMP=2
[preset00]
fRating=1.000
fGammaAdj=1.980
fDecay=0.500
fVideoEchoZoom=1.000
fVideoEchoAlpha=0.500
nVideoEchoOrientation=3
nWaveMode=0
bAdditiveWaves=1
bWaveDots=0
bWaveThick=1
bModWaveAlphaByVolume=1
bMaximizeWaveColor=1
bTexWrap=1
bDarkenCenter=0
bRedBlueStereo=0
bBrighten=0
bDarken=1
bSolarize=0
bInvert=0
fWaveAlpha=0.005
fWaveScale=0.118
fWaveSmoothing=0.900
fWaveParam=-0.480
fModWaveAlphaStart=0.400
fModWaveAlphaEnd=1.600
fWarpAnimSpeed=1.459
fWarpScale=2.007
fZoomExponent=1.00000
fShader=0.000
zoom=0.99990
rot=-0.00000
cx=0.500
cy=0.500
dx=0.00000
dy=0.00000
warp=0.01000
sx=0.99990
sy=1.00000
wave_r=0.800
wave_g=0.490
wave_b=1.000
wave_x=0.500
wave_y=0.500
ob_size=0.035
ob_r=0.000
ob_g=0.000
ob_b=0.000
ob_a=0.000
ib_size=0.260
ib_r=0.250
ib_g=0.250
ib_b=0.250
ib_a=0.000
nMotionVectorsX=64.000
nMotionVectorsY=48.000
mv_dx=0.000
mv_dy=0.000
mv_l=1.850
mv_r=0.500
mv_g=0.500
mv_b=0.500
mv_a=0.000
b1n=0.000
b2n=0.000
b3n=0.000
b1x=1.000
b2x=1.000
b3x=1.000
b1ed=0.000
wavecode_0_enabled=0
wavecode_0_samples=120
wavecode_0_sep=38
wavecode_0_bSpectrum=1
wavecode_0_bUseDots=0
wavecode_0_bDrawThick=0
wavecode_0_bAdditive=0
wavecode_0_scaling=2.15542
wavecode_0_smoothing=0.10000
wavecode_0_r=1.000
wavecode_0_g=0.000
wavecode_0_b=0.000
wavecode_0_a=0.500
wave_0_per_frame1=t1 = 0;
wave_0_per_frame2=t2 = 1;
wave_0_per_frame3=
wave_0_per_frame4=t3=t4=t5 = 0;
wave_0_per_point1=n = t1 * 8 + reg06;
wave_0_per_point2=
wave_0_per_point3=BPM = reg00*t2;
wave_0_per_point4=
wave_0_per_point5=x = BPM/reg01;
wave_0_per_point6=
wave_0_per_point7=y0 = gmegabuf(n)/8; 
wave_0_per_point8=y = 0.3 + y0;
wave_0_per_point9=
wave_0_per_point10=
wave_0_per_point11=amp = pow(value1+value2,2);
wave_0_per_point12=t5 += amp * (sample>0.5);
wave_0_per_point13=t4 += amp * (sample<0.5)*(sample>0.25);
wave_0_per_point14=t3 += amp * (sample < 0.25);
wave_0_per_point15=
wave_0_per_point16=reg50 = sqrt(t3);
wave_0_per_point17=reg51 = sqrt(t4);
wave_0_per_point18=reg52 = sqrt(t5);
wave_0_per_point19=
wave_0_per_point20=t1 += 1;
wave_0_per_point21=t2 *= reg05;
wavecode_1_enabled=0
wavecode_1_samples=120
wavecode_1_sep=0
wavecode_1_bSpectrum=0
wavecode_1_bUseDots=0
wavecode_1_bDrawThick=0
wavecode_1_bAdditive=0
wavecode_1_scaling=0.89152
wavecode_1_smoothing=0.82000
wavecode_1_r=1.000
wavecode_1_g=1.000
wavecode_1_b=0.000
wavecode_1_a=0.500
wave_1_per_frame1=t1 = 0;
wave_1_per_frame2=t2 = 1;
wave_1_per_point1=n = (t1 + reg03) * 8 +reg06;
wave_1_per_point2=
wave_1_per_point3=BPM = reg00*t2;
wave_1_per_point4=
wave_1_per_point5=x = BPM/reg01;
wave_1_per_point6=
wave_1_per_point7=y0 = gmegabuf(n)/8; 
wave_1_per_point8=y = 0.3 + y0;
wave_1_per_point9=
wave_1_per_point10=
wave_1_per_point11=t1 += 1;
wave_1_per_point12=t2 *= reg05;
wavecode_2_enabled=0
wavecode_2_samples=120
wavecode_2_sep=0
wavecode_2_bSpectrum=0
wavecode_2_bUseDots=0
wavecode_2_bDrawThick=0
wavecode_2_bAdditive=0
wavecode_2_scaling=5.34537
wavecode_2_smoothing=0.82000
wavecode_2_r=0.000
wavecode_2_g=0.600
wavecode_2_b=1.000
wavecode_2_a=0.500
wave_2_per_frame1=t1 = 0;
wave_2_per_frame2=t2 = 1;
wave_2_per_point1=n = (t1 + 2*reg03) * 8 +reg06;
wave_2_per_point2=
wave_2_per_point3=BPM = reg00*t2;
wave_2_per_point4=
wave_2_per_point5=x = BPM/reg01;
wave_2_per_point6=
wave_2_per_point7=y0 = gmegabuf(n)/8; 
wave_2_per_point8=y = 0.3 + y0;
wave_2_per_point9=
wave_2_per_point10=
wave_2_per_point11=t1 += 1;
wave_2_per_point12=t2 *= reg05;
wavecode_3_enabled=0
wavecode_3_samples=40
wavecode_3_sep=0
wavecode_3_bSpectrum=1
wavecode_3_bUseDots=0
wavecode_3_bDrawThick=1
wavecode_3_bAdditive=0
wavecode_3_scaling=1.00000
wavecode_3_smoothing=0.50000
wavecode_3_r=1.000
wavecode_3_g=1.000
wavecode_3_b=1.000
wavecode_3_a=0.600
wave_3_per_frame1=t1 = 0;
wave_3_per_frame2=t2 = 1;
wave_3_per_point1=if (1,
wave_3_per_point2=
wave_3_per_point3=  n = t1*8+50000;
wave_3_per_point4=  BPM = reg00*t2*2;
wave_3_per_point5=  x = BPM/reg01;
wave_3_per_point6=  y0 = gmegabuf(n); 
wave_3_per_point7=  y = 0.3 + y0/50;
wave_3_per_point8=  
wave_3_per_point9=,
wave_3_per_point10=
wave_3_per_point11=  n = t1*8+60000;
wave_3_per_point12=  BPM = reg00*t2;
wave_3_per_point13=  x = BPM/reg01;
wave_3_per_point14=  y0 = gmegabuf(n); 
wave_3_per_point15=  y = 0.3 + y0/20;
wave_3_per_point16=  r = 0;
wave_3_per_point17=
wave_3_per_point18=);
wave_3_per_point19=
wave_3_per_point20=
wave_3_per_point21=t1 += 1;
wave_3_per_point22=t2 *= reg05;
wave_3_per_point23=
shapecode_0_enabled=1
shapecode_0_sides=4
shapecode_0_additive=0
shapecode_0_thickOutline=0
shapecode_0_textured=0
shapecode_0_num_inst=1
shapecode_0_x=0.500
shapecode_0_y=0.500
shapecode_0_rad=0.09820
shapecode_0_ang=0.00000
shapecode_0_tex_ang=1.00531
shapecode_0_tex_zoom=1.53110
shapecode_0_r=0.000
shapecode_0_g=0.000
shapecode_0_b=0.000
shapecode_0_a=0.500
shapecode_0_r2=0.300
shapecode_0_g2=0.300
shapecode_0_b2=0.300
shapecode_0_a2=0.000
shapecode_0_border_r=1.000
shapecode_0_border_g=1.000
shapecode_0_border_b=1.000
shapecode_0_border_a=1.000
shape_0_per_frame1=
shape_0_per_frame2=  a = max(0,min(1,q2)); a = 1; a2 = a; 
shape_0_per_frame3=
shape_0_per_frame4=  y = 0.5;
shape_0_per_frame5=  rad=0.1+ 0.3*(q1);
shape_0_per_frame6=  ang=0.625+ 0.58*(q1);
shapecode_1_enabled=0
shapecode_1_sides=4
shapecode_1_additive=0
shapecode_1_thickOutline=1
shapecode_1_textured=0
shapecode_1_num_inst=50
shapecode_1_x=0.800
shapecode_1_y=0.800
shapecode_1_rad=0.02194
shapecode_1_ang=0.00000
shapecode_1_tex_ang=0.00000
shapecode_1_tex_zoom=0.93550
shapecode_1_r=1.000
shapecode_1_g=1.000
shapecode_1_b=1.000
shapecode_1_a=0.400
shapecode_1_r2=1.000
shapecode_1_g2=1.000
shapecode_1_b2=1.000
shapecode_1_a2=0.500
shapecode_1_border_r=0.000
shapecode_1_border_g=1.000
shapecode_1_border_b=0.000
shapecode_1_border_a=0.000
shape_1_per_frame1=y = 0.0 + instance/num_inst*q3*0.1;;
shape_1_per_frame2=x = 0.05;
shape_1_per_frame3=
shape_1_per_frame4=
shape_1_per_frame5=b = g = min(1,q3/2); b2=g2=g;
shapecode_2_enabled=0
shapecode_2_sides=4
shapecode_2_additive=1
shapecode_2_thickOutline=1
shapecode_2_textured=0
shapecode_2_num_inst=21
shapecode_2_x=0.950
shapecode_2_y=0.900
shapecode_2_rad=0.06386
shapecode_2_ang=0.00000
shapecode_2_tex_ang=0.00000
shapecode_2_tex_zoom=0.73678
shapecode_2_r=1.000
shapecode_2_g=0.600
shapecode_2_b=1.000
shapecode_2_a=1.000
shapecode_2_r2=0.000
shapecode_2_g2=0.700
shapecode_2_b2=1.000
shapecode_2_a2=0.000
shapecode_2_border_r=1.000
shapecode_2_border_g=1.000
shapecode_2_border_b=0.000
shapecode_2_border_a=0.000
shape_2_per_frame1=k1 = (instance/num_inst)*0.2;
shape_2_per_frame2=
shape_2_per_frame3=x = 0.5 + abs(q4)*k1;
shape_2_per_frame4=y = 0.5 + q5*k1*q32*8;
shapecode_3_enabled=0
shapecode_3_sides=4
shapecode_3_additive=0
shapecode_3_thickOutline=1
shapecode_3_textured=0
shapecode_3_num_inst=2
shapecode_3_x=0.600
shapecode_3_y=0.650
shapecode_3_rad=0.04914
shapecode_3_ang=0.00000
shapecode_3_tex_ang=0.00000
shapecode_3_tex_zoom=0.34933
shapecode_3_r=1.000
shapecode_3_g=1.000
shapecode_3_b=0.000
shapecode_3_a=1.000
shapecode_3_r2=0.000
shapecode_3_g2=0.000
shapecode_3_b2=0.000
shapecode_3_a2=0.000
shapecode_3_border_r=0.200
shapecode_3_border_g=0.700
shapecode_3_border_b=0.500
shapecode_3_border_a=0.000
shape_3_per_frame1=
shape_3_per_frame2=if (instance ==0,
shape_3_per_frame3=  x = 0.95;
shape_3_per_frame4=  y = 0.5 + q11*0.04;
shape_3_per_frame5=,0);
shape_3_per_frame6=
shape_3_per_frame7=if (instance ==1,
shape_3_per_frame8=  x = 0.97;
shape_3_per_frame9=  y = 0.5 + q31*0.04;
shape_3_per_frame10=,0);
per_frame_init_1=index = 0;
per_frame_init_2=loop (200000,
per_frame_init_3=  megabuf(index) = 0;
per_frame_init_4=  gmegabuf(index) = 0;
per_frame_init_5=  index = index + 1;
per_frame_init_6=);
per_frame_init_7=
per_frame_init_8=tstart = time;
per_frame_init_9=
per_frame_init_10=bd_recsz   = 8;
per_frame_init_11=bd_nsrc    = 3; //bass,mid,oct
per_frame_init_12=bd_noct     = 3; //Oktaven
per_frame_init_13=bd_nspo     = 40;//Res. pro Oktave
per_frame_init_14=bd_finc    = pow(2.0,1/bd_nspo); //Freq. Incr. 
per_frame_init_15=bd_nres    = bd_noct * bd_nspo;
per_frame_init_16=bd_minbpm  = 40;
per_frame_init_17=bd_maxbpm  = pow(2,bd_noct)*bd_minbpm;
per_frame_init_18=bd_mintime = 4; //time persistence
per_frame_init_19=bd_minq = 0.8;
per_frame_init_20=
per_frame_init_21=//mem spaces
per_frame_init_22=bd_dat0  = 100000;
per_frame_init_23=bd_tab0  = bd_dat0 + bd_nres * bd_nsrc * bd_recsz;
per_frame_init_24=bd_res0  = bd_tab0 + bd_nres           * bd_recsz; 
per_frame_init_25=
per_frame_init_26=
per_frame_init_27=//Fill BPM Tab
per_frame_init_28=
per_frame_init_29=
per_frame_init_30=
per_frame_init_31=//##### nur fuer Darstellung
per_frame_init_32=reg00 = bd_minbpm;
per_frame_init_33=reg01 = bd_maxbpm;
per_frame_init_34=reg02 = bd_recsz;
per_frame_init_35=reg03 = bd_nres;
per_frame_init_36=reg05 = bd_finc;
per_frame_init_37=
per_frame_init_38=reg06 = bd_dat0;
per_frame_init_39=reg07 = bd_mp0;
per_frame_init_40=
per_frame_1=//STILL A CONSTRUCTION SITE. Do not use this code fragment.
per_frame_2=bd_minq = 0.8;
per_frame_3=
per_frame_4=dt = min (1/fps,0.1); 
per_frame_5=dec_m = 1-dt*2;
per_frame_6=bd_b =  log(1+bass); bd_bass_ = bd_bass_*dec_m + (1-dec_m)*bd_b; bd_bass = bd_b-bd_bass_;
per_frame_7=bd_m =  log(1+mid) ; bd_mid_  = bd_mid_ *dec_m + (1-dec_m)*bd_m; bd_mid =  bd_m -bd_mid_;
per_frame_8=bd_t =  log(1+treb); bd_treb_ = bd_treb_*dec_m + (1-dec_m)*bd_t; bd_treb = bd_t-bd_treb_;
per_frame_9=
per_frame_10=n = 0; 
per_frame_11=loop (bd_nres, 
per_frame_12=  gmegabuf(50000+n*bd_recsz) = 0; //Ueber Oct summiert
per_frame_13=n+=1);
per_frame_14=
per_frame_15=bd_src=0;
per_frame_16=loop (bd_nsrc, bd_exc = bd_bass*(bd_src==0) + bd_mid*(bd_src==1) + bd_treb*(bd_src==2);
per_frame_17=  oct = 0; EC_steps = 3; bd_omega = bd_minbpm/60*6.283;
per_frame_18=  loop (bd_noct,
per_frame_19=    n       = bd_dat0 + (bd_nres*bd_src +oct*bd_nspo)*bd_recsz;
per_frame_20=    bd_slot = 0; bd_pk = bd_mean = 0; dt_ec = dt/EC_steps;
per_frame_21=    loop (bd_nspo,
per_frame_22=      gmegabuf (n+1) *= 1-dt * (1+oct)*0.15; //damping
per_frame_23=      gmegabuf (n+3) = gmegabuf(n+1); //fuer Nulldet
per_frame_24=      loop (EC_Steps,
per_frame_25=        bd_fc   = bd_exc - gmegabuf(n+2) * sqr(bd_omega);
per_frame_26=        gmegabuf (n+1) += bd_fc         * dt_ec;
per_frame_27=        gmegabuf (n+2) += gmegabuf(n+1) * dt_ec;);
per_frame_28=      bd_cos = gmegabuf(n+1);  bd_sin = gmegabuf(n+2)*bd_omega;
per_frame_29=      gmegabuf (n) = gmegabuf(n) * 0.7 + sqrt (pow(bd_sin,2) + pow(bd_cos,2)) * 0.3;
per_frame_30=      m =  50000 + (bd_slot + 0*oct*bd_nspo)*bd_recsz; //benoetigt um spaeter maxind zu suchen
per_frame_31=      gmegabuf(m) += gmegabuf (n) *  gmegabuf((bd_src*bd_noct+oct)*2); //das sind die bd_qual; #andere Pos!
per_frame_32=      bd_ampl = gmegabuf(n); bd_mean += bd_ampl; if (bd_ampl > bd_pk, bd_pk=bd_ampl, 0);
per_frame_33=      bd_omega *= bd_finc;
per_frame_34=      n += bd_recsz;
per_frame_35=    bd_slot +=1;);
per_frame_36=    bd_qual = bd_pk/bd_mean*bd_nspo-1;
per_frame_37=    gmegabuf((bd_src*bd_noct+oct)*2) = bd_qual; //#andere Speicherpos
per_frame_38=  EC_steps *= 2;
per_frame_39=  oct += 1);
per_frame_40=bd_src +=1);
per_frame_41=
per_frame_42=//Get maxind
per_frame_43=bd_slot = 0; maxind = 0; bd_pk = 0; bd_mean = 0;
per_frame_44=loop (bd_nspo,
per_frame_45=   m =  50000 + bd_slot*bd_recsz;
per_frame_46=   bd_mean += gmegabuf(m);
per_frame_47=   if (gmegabuf(m) > bd_pk, bd_pk = gmegabuf(m); maxind = bd_slot, 0);
per_frame_48=bd_slot += 1);
per_frame_49=bd_quali = bd_quali*0.8 + 0.2* (bd_pk/bd_mean*bd_nspo-1);
per_frame_50=
per_frame_51=
per_frame_52=//Search best Source and Octave except Octave 0
per_frame_53=bd_src = 0; bd_bestoct = 0; bd_bestsrc = 0; bd_maxamp = 0;
per_frame_54=loop (bd_nsrc,
per_frame_55=  oct = 1;  
per_frame_56=  loop (bd_noct-1,
per_frame_57=    n =  bd_dat0 + (bd_nres*bd_src +oct*bd_nspo+ maxind)*bd_recsz;
per_frame_58=    bd_qual = gmegabuf((bd_src*bd_noct+oct)*2); //#Adresse !
per_frame_59=    ampl = bd_qual / (1+oct*(maxind/bd_noct)*0.5);// * gmegabuf(n);
per_frame_60=    if (ampl>bd_maxamp, bd_maxamp = ampl; bd_bestsrc=bd_src; bd_bestoct=oct;,0);
per_frame_61=  oct += 1);
per_frame_62=bd_src +=1);
per_frame_63=
per_frame_64=
per_frame_65=//Beat-Flash
per_frame_66=bd_prefadr = bd_dat0+(bd_nres*bd_bestsrc +bd_nspo*bd_bestoct + maxind)*bd_recsz;
per_frame_67=bd_chg     = abs (bd_prefadr -bd_adr) > bd_recsz;
per_frame_68=if(bor(!bd_chg,band(1,time >bd_tres+bd_mintime)), bd_adr=bd_prefadr;bd_tres=time,0);
per_frame_69=bd_syncsin = -gmegabuf(bd_adr+1) / gmegabuf(bd_adr);
per_frame_70=bd_bt =  (bd_syncsin>0) * (bd_syncsin_<0) * (bd_quali > bd_minq);
per_frame_71=bd_syncsin_ = bd_syncsin;
per_frame_72=prog = (prog+bd_bt+is_beat*(bd_quali < bd_minq) )%4;
per_frame_73=
per_frame_74=//"Classic" beat reaction
per_frame_75=dec_med  = 1 - 0.15 * 40/fps;
per_frame_76=dec_slow = 1 - 0.05 * 40/fps;
per_frame_77=cbeat = bass+mid+treb;
per_frame_78=avg = avg*dec_slow + cbeat*(1-dec_slow);
per_frame_79=is_beat = above(cbeat, 1.5*avg) * above (time, tc0+.2);
per_frame_80=tc0 = if (bor(is_beat, bd_bt),time,tc0);
per_frame_81=peak = is_beat * cbeat + (1-is_cbeat)*peak*dec_med;
per_frame_82=
per_frame_83=
per_frame_84=q1 = prog;
per_frame_85=q2 = (bd_syncsin>0);
per_frame_86=q3 = bd_quali;
per_frame_87=
per_frame_88=q4 = bd_syncsin;
per_frame_89=q5 = bd_synccos;
per_frame_90=q6 = (bd_quali < bd_minq);
per_frame_91=
per_frame_92=q21 = bd_maxbpm;
per_frame_93=q32 = aspecty;monitor = bd_bass;
per_frame_94=
per_frame_95=monitor = is_beat;
warp_1=`shader_body {
warp_2=`//ret = 1;
warp_3=`}
comp_1=`sampler sampler_rand00;
comp_2=`shader_body {
comp_3=`
comp_4=`
comp_5=`ret = GetPixel(uv);
comp_6=`
comp_7=`float2 back = tex2D(sampler_noise_lq,uv).rg-0.5;
comp_8=`
comp_9=`
comp_10=`//ret += back.g*0.1;
comp_11=`
comp_12=`//ret += GetBlur1(uv-0.01+back*0.01);
comp_13=`
comp_14=`}
comp_15=`
